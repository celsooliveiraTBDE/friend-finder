<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Survey Page Page</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
	<!-- Google Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Passion+One' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Oxygen' rel='stylesheet' type='text/css'>
    <link href='styles.css' rel='stylesheet' type='text/css'>

</head>

<body>
    <div class="container">
        <div class="jumbotron">
            <h1 class="display-4">What's Your Perfect Drink?</h1>
            <p class="lead">Just answer 10 questions, party all day long with your favorite boozy companion.</p>
            <hr class="my-4">
        </div>
        <p>
            <b>Results:</b>
            <div id="results"></div>
        </p>

        <form action="">

            <div class="form-group">
                <label for="exampleFormControlSelect2">1 - How often do you drink craft cocktails? (1=Not Often 5=It's my Jam!)</label>
                <select name="multiple" multiple="multiple" multiple class="form-control" id="exampleFormControlSelect2">
                    <option>1</option>
                    <option>2</option>
                    <option selected="selected">3</option>
                    <option>4</option>
                    <option>5</option>

                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect2">2 - How dark do you like main spirit to be? 1 = Vodka 2 = Gin 3 = Tequila Reposado 4 = Whiskey 5 = Dark Rum</label>
                <select name="multiple" multiple="multiple" multiple class="form-control" id="exampleFormControlSelect2">
                    <option>1</option>
                    <option>2</option>
                    <option selected="selected">3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect2">3 - Drink Profile: (1 = Tall and Icy, 5 = Short and Boozy) </label>
                <select name="multiple" multiple="multiple" multiple class="form-control" id="exampleFormControlSelect2">
                    <option>1</option>
                    <option>2</option>
                    <option selected="selected">3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect2">4 - Sweetness: How sweet do you typically like your drinks to be? (1 = Sticky Sweet 5=Not Sweet At All)</label>
                <select name="multiple" multiple="multiple" multiple class="form-control" id="exampleFormControlSelect2">
                    <option>1</option>
                    <option>2</option>
                    <option selected="selected">3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect2"> 5- How acidic/sour do you typically like your drinks? 1= Sweet Tarts 5=Hold the Lemon</label>
                <select name="multiple" multiple="multiple" multiple class="form-control" id="exampleFormControlSelect2">
                    <option>1</option>
                    <option>2</option>
                    <option selected="selected">3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect2">6 - How icy do you typically like your drinks? (1 = Martini 2 = Large Rock 3 = Just Enough 4 = Pebble Ice
                    5 = Gimme a Snow-Cone. I'm in!)</label>
                <select name="multiple" multiple="multiple" multiple class="form-control" id="exampleFormControlSelect2">
                    <option>1</option>
                    <option>2</option>
                    <option selected="selected">3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect2">7 - Egg Whites? Flips with full eggs? (1= Holy, Salmonella, 3=I'm thirsty,who cares. 5=double up)</label>
                <select name="multiple" multiple="multiple" multiple class="form-control" id="exampleFormControlSelect2">
                    <option>1</option>
                    <option>2</option>
                    <option selected="selected">3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect2">8. How about a float? (1=Club Soda 3=Bubbly On Top 5=None) </label>
                <select name="multiple" multiple="multiple" multiple class="form-control" id="exampleFormControlSelect2">
                    <option>1</option>
                    <option>2</option>
                    <option selected="selected">3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect2">9. What's your go-to garnish? (1= Fresh Herbs 3=Cherry on Top 5=More Booze)</label>
                <select name="multiple" multiple="multiple" multiple class="form-control" id="exampleFormControlSelect2">
                    <option>1</option>
                    <option>2</option>
                    <option selected="selected">3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect2">I typically like to drink: (1=Daytime 3=Don't Matter 5=Nightcap) </label>
                <select name="multiple" multiple="multiple" multiple class="form-control" id="exampleFormControlSelect2">
                    <option>1</option>
                    <option>2</option>
                    <option selected="selected">3</option>
                    <option>4</option>
                    <option>5</option>
                </select>

            </div>
            <button type="submit" class="btn btn-primary submit">Submit</button>

        </form>

    </div>
    <footer class="footer">
        <div class="container">
            <p>Control Panel</p>
            <p>
                <a href="#" id="clear">Clear Table</a> |
                <a href="/api/friends">API Drinks</a> |
                <a href="/api/surveys">API Survey Results</a> |
                <a href="#">GitHub Repo</a>
            </p>
        </div>
    </footer>

    <!-- The Modal -->
    <div class="modal" id="drinkModal">

        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Your Drink of Choice: </h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">

                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
</body>
<script>    

    $(document).ready(function () {

        $("button").on("click", function (e) {
            e.preventDefault();
            var newSurvey = $("form").serializeArray();
            $.each(newSurvey, function (i, field) {
                $("#results").append(field.name + ":" + field.value + " ");
                console.log("BLAHH", field.value)
            });
            console.log(newSurvey)


            $.post("/api/surveys", newSurvey, function (data) {

                // the JSON with the results are passed back
                console.log(data);


                $('.modal-body').html(`<h1>this ${data.drinkname} is for you </h1>
                <img src="${data.drinkphoto}" alt="${data.drinkname}" height="420" width="420">
`)
            });
            $.get("https://en.wikipedia.org/w/api.php?action=query&titles=Main%20Page&prop=revisions&rvprop=content&format=json&formatversion=2").then(function (response) {
                console.log(response)
            })
            $("#drinkModal").modal("show");

        });


    });

</script>